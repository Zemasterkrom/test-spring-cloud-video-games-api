name: Set up builders
description: Set up OpenJDK, Node, Newman
runs:
  using: "composite"
  steps:
    - name: Set up OpenJDK 8
      uses: actions/setup-java@v3
      with:
        distribution: 'adopt'
        java-version: '8'

    - uses: actions/cache@v3
      with:
        path: '**/node_modules'
        key: ${{ runner.os }}-modules-${{ hashFiles('**/package-lock.json') }}

    - name: Set up Node
      uses: actions/setup-node@v3
      with:
        node-version: '16'
        cache: 'npm'
        cache-dependency-path: './vglfront/package-lock.json'

    - name: Set up Newman
      shell: ${{ runner.os == 'Windows' && 'cmd' || 'sh' }}
      run: npm install -g newman